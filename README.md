תיעוד למערכת SpeedTest
תיאור כללי
המערכת מורכבת משרת (Server) ולקוח (Client) המאפשרים לבצע בדיקות מהירות של חיבורי רשת באמצעות פרוטוקולי TCP ו-UDP.
הלקוח מתחבר לשרת, שולח בקשות לבדיקות מהירות ומודד את קצב העברת הנתונים.
השרת מגיב לבקשות הלקוח, מבצע את ההעברות, ומשתף נתונים אודות ההעברה.

מבנה המערכת
SpeedTestClient
זוהי מחלקה שמייצגת לקוח המתחבר לשרת כדי לבצע בדיקות מהירות.
תכונות עיקריות:

MAGIC_COOKIE: מזהה ייחודי לתקשורת בין הלקוח לשרת.
MSG_TYPE_OFFER, MSG_TYPE_REQUEST, MSG_TYPE_PAYLOAD: מזהים לסוגי הודעות המועברות בין הלקוח לשרת.
פונקציות:

__init__()
מאתחלת את הלקוח, מכינה את הסוקטים ומאזינה להצעות חיבור.

start()
לולאה ראשית המאפשרת ללקוח להגדיר את פרטי הבדיקה ולחפש שרת מתאים.

_get_positive_int(prompt: str)
מבקשת מהמשתמש להכניס ערך שלם חיובי ומטפלת בטעויות קלט.

_find_server()
מחפשת שרת תקף המציע שירותי בדיקה באמצעות הודעת "הצעה" (MSG_TYPE_OFFER).

_tcp_test(test_id, size)
מבצעת בדיקת מהירות TCP ומדווחת את הקצב שהושג.

_udp_test(test_id, size)
מבצעת בדיקת מהירות UDP, סופרת חבילות מוצלחות ומדווחת את הקצב ואחוז ההצלחה.

SpeedTestServer
זוהי מחלקה שמייצגת שרת המספק שירותי בדיקות מהירות ללקוחות.
תכונות עיקריות:

MAGIC_COOKIE: מזהה ייחודי לתקשורת בין הלקוח לשרת.
MSG_OFFER, MSG_REQUEST, MSG_TYPE_PAYLOAD: מזהים לסוגי הודעות.
פונקציות:

__init__()
מאתחלת את השרת, פותחת סוקטים TCP ו-UDP וממתינה לחיבורים.

start()
מפעילה שלושה תהליכים:

שידור הודעות Broadcast (_broadcast) ללקוחות.
טיפול בחיבורים TCP (_handle_tcp).
טיפול בבקשות UDP (_handle_udp).
_broadcast()
שולחת הודעות Broadcast כדי להודיע ללקוחות על זמינות השרת.

_handle_tcp()
מאזינה לבקשות TCP של לקוחות ומעבירה נתונים בגודל שנדרש.

_handle_udp()
מאזינה לבקשות UDP, מטפלת בהן, ושולחת נתונים בחבילות קטנות.

_udp_transfer(addr, size)
מבצעת את העברת הנתונים ב-UDP, כולל שליחה של חבילות נתונים עם מזהים ייחודיים.
